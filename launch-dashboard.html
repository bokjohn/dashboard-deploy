<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üöÄ Launch Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #3B82F6;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --neutral: #6B7280;
            --bg: #F9FAFB;
            --card-bg: #FFFFFF;
            --text: #1F2937;
            --text-light: #6B7280;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            padding-bottom: 80px;
            -webkit-font-smoothing: antialiased;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Container */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 16px;
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .card-header {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Next Action Card */
        .next-action {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .next-action-meta {
            display: flex;
            gap: 16px;
            font-size: 14px;
            margin: 12px 0;
            opacity: 0.9;
        }

        /* Momentum */
        .streak-dots {
            display: flex;
            gap: 8px;
            margin: 12px 0;
            align-items: center;
        }

        .dot {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #E5E7EB;
        }

        .dot.active {
            background: var(--success);
        }

        .streak-text {
            font-size: 14px;
            font-weight: 600;
            color: var(--success);
            margin-left: 8px;
        }

        .last-action {
            font-size: 14px;
            color: var(--text-light);
            margin-top: 12px;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 14px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            border: none;
            cursor: pointer;
            text-align: center;
            min-height: 48px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-block {
            width: 100%;
            display: block;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        /* Business Ideas */
        .ideas-scroll {
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            display: flex;
            gap: 16px;
            margin: 0 -16px;
            padding: 0 16px 16px;
            -webkit-overflow-scrolling: touch;
        }

        .idea-card {
            min-width: 85%;
            scroll-snap-align: center;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .idea-card.picked {
            border: 3px solid var(--success);
        }

        .idea-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .idea-score {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 16px;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .score-item {
            font-size: 14px;
        }

        .score-item strong {
            display: block;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s;
        }

        .last-test {
            background: #F3F4F6;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            margin: 12px 0;
        }

        .last-test strong {
            display: block;
            margin-bottom: 4px;
        }

        /* Experiments */
        .experiment-list {
            list-style: none;
        }

        .experiment-item {
            padding: 12px;
            border-left: 4px solid #E5E7EB;
            margin-bottom: 12px;
            background: #F9FAFB;
            border-radius: 4px;
        }

        .experiment-item.done {
            border-color: var(--success);
        }

        .experiment-item.in-progress {
            border-color: var(--warning);
        }

        .experiment-item strong {
            display: block;
            margin-bottom: 4px;
        }

        .experiment-result {
            font-size: 14px;
            color: var(--text-light);
        }

        /* Blockers */
        .blocker-list {
            list-style: none;
        }

        .blocker-item {
            background: #FEF3C7;
            border-left: 4px solid var(--warning);
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 12px;
        }

        .blocker-item strong {
            display: block;
            margin-bottom: 4px;
        }

        .blocker-action {
            font-size: 14px;
            color: var(--text-light);
        }

        /* Week Progress */
        .week-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 12px 0;
        }

        .day {
            aspect-ratio: 1;
            border-radius: 8px;
            background: #E5E7EB;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }

        .day.done {
            background: var(--success);
            color: white;
        }

        .day.today {
            border: 2px solid var(--primary);
        }

        /* Navigation */
        .nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #E5E7EB;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            padding: 8px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }

        .nav-item {
            text-align: center;
            padding: 8px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--text-light);
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 24px;
        }

        /* Screens */
        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* Revenue Metrics */
        .metric-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 16px 0;
        }

        .metric {
            background: #F3F4F6;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 4px;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 14px;
            font-weight: 600;
            background: var(--warning);
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            font-size: 16px;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .idea-list-item {
            background: var(--card-bg);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .idea-list-item.picked {
            border-color: var(--success);
        }

        .idea-info {
            flex: 1;
        }

        .idea-info strong {
            display: block;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .idea-info small {
            color: var(--text-light);
            font-size: 14px;
        }

        .idea-score-small {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>üöÄ Launch Dashboard</h1>
        <div class="subtitle">Pick. Validate. Launch.</div>
    </div>

    <!-- TODAY Screen -->
    <div id="screenToday" class="screen active">
        <div class="container">
            <!-- Next Action -->
            <div class="card next-action">
                <div class="card-header">üéØ YOUR NEXT ACTION</div>
                <div id="nextActionText">Set your first action!</div>
                <div id="nextActionMeta" class="next-action-meta" style="display: none;">
                    <span id="nextActionTime"></span>
                    <span id="nextActionDeadline"></span>
                </div>
                <button class="btn btn-success btn-block" id="btnCompleteAction" style="margin-top: 16px;">‚úÖ MARK DONE</button>
            </div>

            <!-- Momentum -->
            <div class="card">
                <div class="card-header">üî• MOMENTUM</div>
                <div class="streak-dots">
                    <div class="dot active"></div>
                    <div class="dot active"></div>
                    <div class="dot active"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <span class="streak-text" id="streakText">3-day streak</span>
                </div>
                <div class="last-action" id="lastActionText">Last action: 2 hours ago</div>
                
                <div style="margin-top: 16px;">
                    <strong style="display: block; margin-bottom: 8px;">This Week:</strong>
                    <div id="weekWins"></div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" id="btnLogWin">üìù Log Win</button>
                <button class="btn btn-outline" id="btnSetAction">‚ö° Set Action</button>
            </div>
        </div>
    </div>

    <!-- IDEAS Screen -->
    <div id="screenIdeas" class="screen">
        <div class="container">
            <div class="card">
                <div class="card-header">üéØ PICK YOUR BUSINESS</div>
                <p style="margin-bottom: 16px; color: var(--text-light);">Swipe to compare your top ideas ‚Üí</p>
                
                <div class="ideas-scroll" id="ideasScroll">
                    <!-- Ideas will be rendered here -->
                </div>
            </div>

            <div class="card">
                <div class="card-header">üìã All Ideas</div>
                <div id="allIdeasList"></div>
            </div>

            <button class="btn btn-primary btn-block" id="btnAddIdea">‚ûï Add New Idea</button>
        </div>
    </div>

    <!-- PROGRESS Screen -->
    <div id="screenProgress" class="screen">
        <div class="container">
            <div class="card">
                <div class="card-header">üìä VALIDATION PROGRESS</div>
                <p id="currentlyTesting" style="margin-bottom: 16px; font-weight: 600;">Currently testing: <span id="testingIdea">Pick an idea first</span></p>
                
                <div id="experimentsSection"></div>
            </div>

            <div class="card">
                <div class="card-header">üöß BLOCKERS</div>
                <ul class="blocker-list" id="blockersList">
                    <li class="empty-state">
                        <div class="empty-state-icon">‚ú®</div>
                        <p>No blockers yet. Start validating!</p>
                    </li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">üèÜ THIS WEEK</div>
                <div class="week-days">
                    <div class="day done">M</div>
                    <div class="day done">T</div>
                    <div class="day done">W</div>
                    <div class="day today">T</div>
                    <div class="day">F</div>
                    <div class="day">S</div>
                    <div class="day">S</div>
                </div>
                <div id="weekProgressList"></div>
            </div>
        </div>
    </div>

    <!-- REVENUE Screen -->
    <div id="screenRevenue" class="screen">
        <div class="container">
            <div class="card">
                <div class="card-header">üí∞ REVENUE</div>
                <p style="margin-bottom: 16px;">
                    Status: <span class="status-badge">üü° Pre-Revenue</span>
                </p>
                
                <div class="metric-grid">
                    <div class="metric">
                        <div class="metric-value" id="emailList">0</div>
                        <div class="metric-label">üìß Email List</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="landingVisitors">0</div>
                        <div class="metric-label">üìà Landing Visitors</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="interestedCustomers">0</div>
                        <div class="metric-label">ü§ù Interested</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="customerCalls">0</div>
                        <div class="metric-label">üí¨ Calls Done</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">POST-LAUNCH (Coming Soon)</div>
                <div class="metric-grid">
                    <div class="metric">
                        <div class="metric-value">$0</div>
                        <div class="metric-label">Revenue</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">0</div>
                        <div class="metric-label">Customers</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">$0</div>
                        <div class="metric-label">MRR</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">‚Äî</div>
                        <div class="metric-label">Days to First $</div>
                    </div>
                </div>
                <p style="margin-top: 16px; color: var(--text-light); text-align: center;">
                    Not launched yet. Focus on validation first! üëÜ
                </p>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="nav">
        <button class="nav-item active" data-screen="screenToday">
            <div class="nav-icon">üéØ</div>
            <div>Today</div>
        </button>
        <button class="nav-item" data-screen="screenIdeas">
            <div class="nav-icon">üí°</div>
            <div>Ideas</div>
        </button>
        <button class="nav-item" data-screen="screenProgress">
            <div class="nav-icon">üìä</div>
            <div>Progress</div>
        </button>
        <button class="nav-item" data-screen="screenRevenue">
            <div class="nav-icon">üí∞</div>
            <div>Revenue</div>
        </button>
    </div>

    <!-- Modals -->
    
    <!-- Add Idea Modal -->
    <div class="modal" id="modalAddIdea">
        <div class="modal-content">
            <div class="modal-header">‚ûï Add New Business Idea</div>
            <form id="formAddIdea">
                <div class="form-group">
                    <label class="form-label">Business Name</label>
                    <input type="text" class="form-input" id="ideaName" required placeholder="e.g., CopyBot">
                </div>
                <div class="form-group">
                    <label class="form-label">Market Size (1-10)</label>
                    <input type="number" class="form-input" id="ideaMarket" min="1" max="10" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Personal Fit (1-10)</label>
                    <input type="number" class="form-input" id="ideaFit" min="1" max="10" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Validation Ease (1-10)</label>
                    <input type="number" class="form-input" id="ideaValidation" min="1" max="10" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Excitement (1-10)</label>
                    <input type="number" class="form-input" id="ideaExcitement" min="1" max="10" required>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalAddIdea')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Idea</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Log Win Modal -->
    <div class="modal" id="modalLogWin">
        <div class="modal-content">
            <div class="modal-header">üìù Log Today's Win</div>
            <form id="formLogWin">
                <div class="form-group">
                    <label class="form-label">What did you accomplish?</label>
                    <textarea class="form-input" id="winText" required placeholder="e.g., Completed 3 customer interviews"></textarea>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalLogWin')">Cancel</button>
                    <button type="submit" class="btn btn-success">Log Win üéâ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Set Action Modal -->
    <div class="modal" id="modalSetAction">
        <div class="modal-content">
            <div class="modal-header">‚ö° Set Next Action</div>
            <form id="formSetAction">
                <div class="form-group">
                    <label class="form-label">What's your next action? (Be specific!)</label>
                    <textarea class="form-input" id="actionText" required placeholder="e.g., Call 3 potential customers"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Time Estimate (minutes)</label>
                    <input type="number" class="form-input" id="actionTime" required placeholder="45">
                </div>
                <div class="form-group">
                    <label class="form-label">Deadline</label>
                    <input type="datetime-local" class="form-input" id="actionDeadline" required>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalSetAction')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Set Action</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Store
        const store = {
            ideas: [],
            nextAction: null,
            momentum: {
                streak: 0,
                weekProgress: [false, false, false, false, false, false, false],
                lastAction: null,
                winsThisWeek: []
            },
            metrics: {
                emailList: 0,
                landingVisitors: 0,
                interestedCustomers: 0,
                customerCalls: 0
            }
        };

        // Load from localStorage
        function loadData() {
            const saved = localStorage.getItem('launchDashboard');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(store, data);
            } else {
                // Add sample data for demo
                store.ideas = [
                    {
                        id: 'copybot',
                        name: 'CopyBot',
                        scores: { market: 8, fit: 9, validation: 6, excitement: 9 },
                        experiments: [
                            { name: 'Landing page', status: 'done', result: '24% signup rate (50 visits)' },
                            { name: 'Customer interviews', status: 'done', result: '2 would pay, 1 maybe (3 calls)' },
                            { name: 'Email outreach', status: 'in-progress', result: '0/20 sent', next: 'Send 5 today' }
                        ],
                        picked: true
                    },
                    {
                        id: 'saas-idea-2',
                        name: 'TaskFlow AI',
                        scores: { market: 7, fit: 8, validation: 7, excitement: 7 },
                        experiments: [],
                        picked: false
                    }
                ];
                store.nextAction = {
                    text: 'Call 3 potential customers for CopyBot idea',
                    time: '45 minutes',
                    deadline: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString()
                };
                store.momentum = {
                    streak: 3,
                    weekProgress: [true, true, true, false, false, false, false],
                    lastAction: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
                    winsThisWeek: [
                        'Launched landing page',
                        'Completed 3 customer calls',
                        'Drove 50 visitors to landing page'
                    ]
                };
                saveData();
            }
        }

        // Save to localStorage
        function saveData() {
            localStorage.setItem('launchDashboard', JSON.stringify(store));
        }

        // Calculate score
        function calculateScore(scores) {
            return Math.round((scores.market + scores.fit + scores.validation + scores.excitement) * 2.5);
        }

        // Render functions
        function renderToday() {
            // Next Action
            if (store.nextAction) {
                document.getElementById('nextActionText').textContent = store.nextAction.text;
                document.getElementById('nextActionTime').textContent = `‚è±Ô∏è Est: ${store.nextAction.time}`;
                const deadline = new Date(store.nextAction.deadline);
                document.getElementById('nextActionDeadline').textContent = `üìÖ Due: ${deadline.toLocaleDateString()} ${deadline.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
                document.getElementById('nextActionMeta').style.display = 'flex';
            } else {
                document.getElementById('nextActionText').textContent = 'Set your first action!';
                document.getElementById('nextActionMeta').style.display = 'none';
            }

            // Momentum
            document.getElementById('streakText').textContent = `${store.momentum.streak}-day streak`;
            
            if (store.momentum.lastAction) {
                const lastTime = new Date(store.momentum.lastAction);
                const diff = Date.now() - lastTime.getTime();
                const hours = Math.floor(diff / (1000 * 60 * 60));
                document.getElementById('lastActionText').textContent = `Last action: ${hours} hours ago`;
            }

            // Week wins
            const winsHTML = store.momentum.winsThisWeek.length > 0 
                ? store.momentum.winsThisWeek.map(w => `<div style="padding: 8px; background: #F3F4F6; border-radius: 4px; margin-bottom: 8px;">‚úÖ ${w}</div>`).join('')
                : '<div style="color: var(--text-light);">No wins logged yet this week</div>';
            document.getElementById('weekWins').innerHTML = winsHTML;
        }

        function renderIdeas() {
            const sorted = [...store.ideas].sort((a, b) => calculateScore(b.scores) - calculateScore(a.scores));
            const top3 = sorted.slice(0, 3);
            const rest = sorted.slice(3);

            // Top 3 swipeable cards
            const cardsHTML = top3.map((idea, index) => {
                const score = calculateScore(idea.scores);
                const stars = '‚≠ê'.repeat(Math.floor(score / 20)) + '‚ö´'.repeat(5 - Math.floor(score / 20));
                const experiments = idea.experiments || [];
                const done = experiments.filter(e => e.status === 'done').length;
                const total = 5;
                const progress = (done / total) * 100;
                const lastTest = experiments.find(e => e.status === 'done');
                
                return `
                    <div class="idea-card ${idea.picked ? 'picked' : ''}">
                        <div class="idea-name">${index + 1}. ${idea.name}</div>
                        <div class="idea-score">${score}/100 ${stars}</div>
                        <div class="score-breakdown">
                            <div class="score-item">‚úÖ <strong>Market:</strong> ${idea.scores.market}/10</div>
                            <div class="score-item">‚úÖ <strong>Fit:</strong> ${idea.scores.fit}/10</div>
                            <div class="score-item">‚ö†Ô∏è <strong>Validation:</strong> ${idea.scores.validation}/10</div>
                            <div class="score-item">‚úÖ <strong>Excitement:</strong> ${idea.scores.excitement}/10</div>
                        </div>
                        <div>
                            <strong>Experiments: ${done}/${total} done</strong>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                        </div>
                        ${lastTest ? `
                            <div class="last-test">
                                <strong>Last test: ${lastTest.name}</strong>
                                Result: ${lastTest.result} üî•
                            </div>
                        ` : ''}
                        <div class="btn-group">
                            <button class="btn ${idea.picked ? 'btn-success' : 'btn-primary'}" onclick="pickIdea('${idea.id}')">
                                ${idea.picked ? '‚úÖ PICKED' : '‚ñ∂Ô∏è PICK THIS'}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('ideasScroll').innerHTML = cardsHTML || '<div class="empty-state"><div class="empty-state-icon">üí°</div><p>Add your first idea!</p></div>';

            // Rest of ideas
            const restHTML = rest.map(idea => {
                const score = calculateScore(idea.scores);
                return `
                    <div class="idea-list-item ${idea.picked ? 'picked' : ''}" onclick="pickIdea('${idea.id}')">
                        <div class="idea-info">
                            <strong>${idea.name}</strong>
                            <small>${idea.experiments?.length || 0} experiments</small>
                        </div>
                        <div class="idea-score-small">${score}</div>
                    </div>
                `;
            }).join('');

            document.getElementById('allIdeasList').innerHTML = restHTML || '<p style="color: var(--text-light); text-align: center;">All top ideas shown above</p>';
        }

        function renderProgress() {
            const picked = store.ideas.find(i => i.picked);
            
            if (picked) {
                document.getElementById('testingIdea').textContent = picked.name;
                
                const experiments = picked.experiments || [];
                const experimentsHTML = experiments.length > 0 
                    ? `<ul class="experiment-list">${experiments.map(exp => `
                        <li class="experiment-item ${exp.status}">
                            <strong>${exp.status === 'done' ? '‚úÖ' : exp.status === 'in-progress' ? '‚è≥' : '‚ö´'} ${exp.name}</strong>
                            <div class="experiment-result">${exp.result || 'Not started'}</div>
                            ${exp.next ? `<div class="experiment-result">‚Üí Next: ${exp.next}</div>` : ''}
                        </li>
                    `).join('')}</ul>`
                    : '<p style="color: var(--text-light);">No experiments yet. Start testing!</p>';
                
                document.getElementById('experimentsSection').innerHTML = `
                    <div class="card-header" style="margin-top: 16px;">üß™ EXPERIMENTS</div>
                    ${experimentsHTML}
                `;
            } else {
                document.getElementById('testingIdea').textContent = 'Pick an idea first';
                document.getElementById('experimentsSection').innerHTML = '<p style="color: var(--text-light);">Pick a business idea to start tracking validation.</p>';
            }

            // Week progress
            const winsHTML = store.momentum.winsThisWeek.map((w, i) => `
                <div style="padding: 8px; background: #F3F4F6; border-radius: 4px; margin-bottom: 8px;">
                    ‚úÖ ${['Mon', 'Tue', 'Wed', 'Thu', 'Fri'][i] || 'Day ' + (i+1)}: ${w}
                </div>
            `).join('');
            document.getElementById('weekProgressList').innerHTML = winsHTML || '<p style="color: var(--text-light);">No progress logged this week</p>';
        }

        function renderRevenue() {
            document.getElementById('emailList').textContent = store.metrics.emailList;
            document.getElementById('landingVisitors').textContent = store.metrics.landingVisitors;
            document.getElementById('interestedCustomers').textContent = store.metrics.interestedCustomers;
            document.getElementById('customerCalls').textContent = store.metrics.customerCalls;
        }

        function render() {
            renderToday();
            renderIdeas();
            renderProgress();
            renderRevenue();
        }

        // Navigation
        document.querySelectorAll('.nav-item').forEach(btn => {
            btn.addEventListener('click', () => {
                const screen = btn.dataset.screen;
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(screen).classList.add('active');
                document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // Modals
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        document.getElementById('btnAddIdea').addEventListener('click', () => {
            document.getElementById('modalAddIdea').classList.add('active');
        });

        document.getElementById('btnLogWin').addEventListener('click', () => {
            document.getElementById('modalLogWin').classList.add('active');
        });

        document.getElementById('btnSetAction').addEventListener('click', () => {
            // Set default deadline to 5pm today
            const today = new Date();
            today.setHours(17, 0, 0, 0);
            document.getElementById('actionDeadline').value = today.toISOString().slice(0, 16);
            document.getElementById('modalSetAction').classList.add('active');
        });

        // Forms
        document.getElementById('formAddIdea').addEventListener('submit', (e) => {
            e.preventDefault();
            const idea = {
                id: Date.now().toString(),
                name: document.getElementById('ideaName').value,
                scores: {
                    market: parseInt(document.getElementById('ideaMarket').value),
                    fit: parseInt(document.getElementById('ideaFit').value),
                    validation: parseInt(document.getElementById('ideaValidation').value),
                    excitement: parseInt(document.getElementById('ideaExcitement').value)
                },
                experiments: [],
                picked: store.ideas.length === 0
            };
            store.ideas.push(idea);
            saveData();
            render();
            closeModal('modalAddIdea');
            e.target.reset();
        });

        document.getElementById('formLogWin').addEventListener('submit', (e) => {
            e.preventDefault();
            const win = document.getElementById('winText').value;
            store.momentum.winsThisWeek.push(win);
            store.momentum.lastAction = new Date().toISOString();
            store.momentum.streak++;
            
            const today = new Date().getDay();
            const dayIndex = today === 0 ? 6 : today - 1;
            store.momentum.weekProgress[dayIndex] = true;
            
            saveData();
            render();
            closeModal('modalLogWin');
            e.target.reset();
        });

        document.getElementById('formSetAction').addEventListener('submit', (e) => {
            e.preventDefault();
            store.nextAction = {
                text: document.getElementById('actionText').value,
                time: document.getElementById('actionTime').value + ' minutes',
                deadline: document.getElementById('actionDeadline').value
            };
            saveData();
            render();
            closeModal('modalSetAction');
            e.target.reset();
        });

        document.getElementById('btnCompleteAction').addEventListener('click', () => {
            if (store.nextAction) {
                const win = store.nextAction.text;
                store.momentum.winsThisWeek.push(win);
                store.momentum.lastAction = new Date().toISOString();
                store.momentum.streak++;
                
                const today = new Date().getDay();
                const dayIndex = today === 0 ? 6 : today - 1;
                store.momentum.weekProgress[dayIndex] = true;
                
                store.nextAction = null;
                saveData();
                render();
                alert('üéâ Win logged! Set your next action to keep momentum.');
            }
        });

        function pickIdea(ideaId) {
            store.ideas.forEach(i => i.picked = false);
            const idea = store.ideas.find(i => i.id === ideaId);
            if (idea) {
                idea.picked = true;
                saveData();
                render();
            }
        }

        // Initialize
        loadData();
        render();
    </script>
</body>
</html>
